{
	"name": "vectreal-platform",
	"$schema": "../../node_modules/nx/schemas/project-schema.json",
	"sourceRoot": "apps/vectreal-platform/src",
	"projectType": "application",
	"tags": [],

	"targets": {
		"supabase-restart": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform/supabase",
				"envFile": "apps/vectreal-platform/.env.development.local",
				"commands": ["pnpm exec supabase stop", "pnpm exec supabase start"],
				"parallel": false
			}
		},
		"supabase-start": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform/supabase",
				"envFile": "apps/vectreal-platform/.env.development.local",
				"commands": ["pnpm exec supabase start"],
				"parallel": false
			}
		},
		"supabase-stop": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform/supabase",
				"envFile": "apps/vectreal-platform/.env.development.local",
				"commands": ["pnpm exec supabase stop"],
				"parallel": false
			}
		},
		"supabase-db-reset": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform/supabase",
				"envFile": "apps/vectreal-platform/.env.development.local",
				"commands": ["pnpm exec supabase db reset"],
				"parallel": false
			}
		},
		"db-reset": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"envFile": "apps/vectreal-platform/.env.development.local",
				"commands": [
					"pnpm exec supabase db reset",
					"pnpm exec drizzle-kit generate --config drizzle.config.ts",
					"pnpm exec drizzle-kit migrate --config drizzle.config.ts"
				],
				"parallel": false
			}
		},
		"drizzle-clean": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"commands": ["rm -rf drizzle"],
				"parallel": false
			}
		},
		"drizzle-generate": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"envFile": "apps/vectreal-platform/.env.development.local",
				"commands": [
					"pnpm exec drizzle-kit generate --config drizzle.config.ts"
				],
				"parallel": false
			}
		},
		"drizzle-migrate": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"envFile": "apps/vectreal-platform/.env.development.local",
				"commands": [
					"pnpm exec drizzle-kit migrate --config drizzle.config.ts"
				],
				"parallel": false
			}
		},
		"drizzle-push-staging": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"envFile": "apps/vectreal-platform/.env.secrets.local",
				"commands": [
					"DATABASE_URL=$DATABASE_URL_STAGING pnpm exec drizzle-kit push --config drizzle.config.ts"
				],
				"parallel": false
			}
		},
		"drizzle-push-prod": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"envFile": "apps/vectreal-platform/.env.secrets.local",
				"commands": [
					"DATABASE_URL=$DATABASE_URL_PROD pnpm exec drizzle-kit push --config drizzle.config.ts"
				],
				"parallel": false
			}
		},
		"drizzle-migrate-staging": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"envFile": "apps/vectreal-platform/.env.secrets.local",
				"commands": [
					"DATABASE_URL=$DATABASE_URL_STAGING pnpm exec drizzle-kit migrate --config drizzle.config.ts"
				],
				"parallel": false
			}
		},
		"drizzle-migrate-prod": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"envFile": "apps/vectreal-platform/.env.secrets.local",
				"commands": [
					"DATABASE_URL=$DATABASE_URL_PROD pnpm exec drizzle-kit migrate --config drizzle.config.ts"
				],
				"parallel": false
			}
		},
		"lint": {
			"executor": "@nx/eslint:lint",
			"outputs": ["{options.outputFile}"],
			"options": {
				"lintFilePatterns": [
					"apps/vectreal-platform/app/**/*.ts",
					"apps/vectreal-platform/app/**/*.tsx",
					"apps/vectreal-platform/app/**/*.js",
					"apps/vectreal-platform/app/**/*.jsx"
				]
			}
		},
		"start": {
			"executor": "nx:run-commands",
			"options": {
				"cwd": "apps/vectreal-platform",
				"envFile": "apps/vectreal-platform/.env.production.local",
				"command": "react-router-serve build/server/index.js"
			},
			"dependsOn": ["build"]
		}
	}
}
